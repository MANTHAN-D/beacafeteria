<!DOCTYPE html>
<html ng-app="adddealapp">
<head>
    <script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
    <link rel='stylesheet' href='../stylesheets/style.css' />
    <style>
    .header,
    .marketing,
    .footer {
        padding-right: 15px;
        padding-left: 15px;
    }


    .header {
        border-bottom: 1px solid #e5e5e5;
    }

    .header h3 {
        padding-bottom: 19px;
        margin-top: 0;
        margin-bottom: 0;
        line-height: 40px;
    }
    </style>

</head>
<body  >

    <div class="container" ng-controller="modifyCtrl">
        <h1>Daily Deal Configuration</h1>
        <div class="col-lg-6 well">
            <div class="row">
                <form>
                    <div class="col-sm-12">
                        <div class="row">
                            <div class="col-sm-12 form-group">
                                <label> Deal Name</label>
                                <input type="text" ng-model="deals.name" placeholder="Enter deal name.." class="form-control">
                            </div>

                            <div class="form-group">
                                <label>Deal Description</label>
                                <input type="text" placeholder="Enter deal description.." ng-model="deals.description" class="form-control" >
                            </div>                                
                        </div>                  
                        <div class="row">
                            <div class="col-sm-6 form-group">
                                <label> Start Date </label>
                                <input type="date" ng-model="deals.start_date" placeholder="Enter deal start date.." class="form-control">
                            </div>

                            <div class="col-sm-6 form-group">
                                <label>End Date /label>
                                    <input type="date" ng-model="deals.end_date" placeholder="Enter deal expiry date.." class="form-control">
                                </div>                 

                                <div class="form-group">
                                    <label>Price</label>
                                    <input type="number" placeholder="Enter Price " ng-model="deals.price" class="form-control" >
                                </div>  

                                <div class="form-group">
                                    <label>Couter Id</label>
                                    <input type="text" placeholder="Enter Counter number.." ng-model="deals.counter_id" class="form-control">
                                </div>  

                                <div>                   
                                    <button type="button" ng-click="add_deal_config(deals)" class="btn btn-lg btn-info">Add</button>                    
                                </div>
                            </div>
                        </div>       
                    </form> 
                </div>
            </div>
        </div>
        <script>
        var app = angular.module('adddealapp', []);
        app.controller('adddealappCtrl', function($scope,$http) {



            $scope.add_deal_config = function(deals) {

                $http({
                    method: 'POST',
                    url: '/add_deal_config',
                    data:$scope.deals
                }).success(function(data){
                    if(data.statuscode=200)
                    {
                        window.location='./loadadminejs';
                    }
                    else
                    {
                        window.location='./add_deals';
                    }

                }).error(function(error){
                    alert("Deal configuartion failed.");
                });
            };

        });
        </script>
    </body>
    </html>